--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'SQL_ASCII';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

SET search_path = public, pg_catalog;

--
-- Data for Name: dash; Type: TABLE DATA; Schema: public; Owner: dispatcher
--

INSERT INTO dash (name, body, modified) select 'OT.REST', '{"name":"OT.REST","modified":1597319300,"elements":["multiLine","table","single","table-2"],"searches":[{"sid":"alert","original_otl":"otstats  index=restlogs | search level=WARNING OR level=ERROR | table _time,level\n| timechart span=10m count by level\n| fields - 0","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"logs","original_otl":"otstats  index=restlogs earliest=-1d | sort -_time| table _raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"disp_status","original_otl":"otstats  index=restlogs earliest=-5m\n| rex field=_raw \"(dispatcher_status\\D+|start_check)(?<status_disp>(\\d+\\.\\d+|\\w+\\s\\w+))\\.\"\n|search status_disp=* and level!=INFO\n| eval \"last check time\"=strftime(_time,\"%Y-%m-%d %H:%M:%S\")\n| eval \"dispetcher status\"=if(match(status_disp,\"\\W+\"),\"active\",status_disp)\n| table \"dispetcher status\", \"last check time\"|tail 1","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"d","original_otl":"otstats index=restlogs earliest=-1d | rex field=_raw \"HID=(?<hid>\\S+) \"|search hid=*|eventstats values(_raw) as values by hid \n| eval values=mvjoin(values, \"@\") | makemv values delim=\"@\"| table values\n","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}}],"tockens":[],"modalDelete":{"active":false,"id":"","name":"","page":""},"modalSearch":{"elem":"table-2","status":false},"modalSettings":{"status":false},"schedulers":{},"multiLine":{"name_elem":"Alert","width":12,"height":8,"top":6,"left":1,"should":false,"search":"alert","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":true,"visible":true,"level":1,"boxShadow":false,"united":true},"loading":false,"metrics":["ERROR","WARNING"]},"events":[],"table":{"name_elem":"Last rest logs","width":19,"height":11,"top":1,"left":13,"should":false,"search":"logs","switch":true,"actions":[{"name":"click","capture":["_raw"]},{"name":"mouseover","capture":["_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single":{"name_elem":"Dispatcher status","width":12,"height":5,"top":1,"left":1,"should":false,"search":"disp_status","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-2":{"name_elem":"Info about every query","width":19,"height":8,"top":12,"left":13,"should":false,"search":"d","switch":true,"actions":[{"name":"click","capture":["values"]},{"name":"mouseover","capture":["values"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"grid":{"vert":"32","hor":"18"},"gridShow":"true","dragRes":"true"}', '2020-08-18 13:43:20.527323+03' where
    NOT EXISTS (
        SELECT id FROM dash WHERE name='OT.REST'
    ) returning id;

INSERT INTO dash (name, body, modified) select 'GlusterFS', '{"name":"GlusterFS","modified":1597078370,"elements":["multiLine","table","table-2","table-3","table-4"],"searches":[{"sid":"alert","original_otl":"otstats index=glusterfslogs | search level=W OR level=E | table _time,level\n| timechart span=10m count by level\n| rename W as WARN\n| rename E as ERROR\n| fields - 0","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"volume","original_otl":"otstats index=glusterfslogs earliest=-1d | search source=*glfs* |table _raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"bricks","original_otl":"otstats index=glusterfslogs earliest=-1d | search source=*bricks*| table _raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"glusterd","original_otl":"otstats index=glusterfslogs | search source=*glusterd*| table _raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"disk space","original_otl":"otstats index=nifilogs sourcetype=nifi_applogs earliest=-1h | rex field=_raw \"glusterfs disk usage:  (?<disk_usage>.*)\" |search disk_usage=*\n|table disk_usage\n|rename disk_usage as \"Filesystem             Size  Used Avail Use% Mounted on\"\n","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}}],"tockens":[],"modalDelete":{"active":false,"id":"","name":"","page":""},"modalSearch":{"elem":"table-4","status":false},"modalSettings":{"status":false},"schedulers":{},"multiLine":{"name_elem":"Alert","width":12,"height":9,"top":1,"left":1,"should":false,"search":"alert","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":true,"visible":true,"level":1,"boxShadow":false,"united":true},"loading":false,"metrics":["WARN","ERROR"]},"events":[],"table":{"name_elem":"Volume''s log","width":18,"height":8,"top":12,"left":13,"should":false,"search":"volume","switch":true,"actions":[{"name":"click","capture":["_raw"]},{"name":"mouseover","capture":["_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-2":{"name_elem":"Brick''s logs","width":18,"height":7,"top":5,"left":13,"should":false,"search":"bricks","switch":true,"actions":[{"name":"click","capture":["_raw"]},{"name":"mouseover","capture":["_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-3":{"name_elem":"Glusterd logs","width":12,"height":7,"top":10,"left":1,"should":false,"search":"glusterd","switch":true,"actions":[{"name":"click","capture":["_raw"]},{"name":"mouseover","capture":["_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-4":{"name_elem":"Disk space usage","width":18,"height":4,"top":1,"left":13,"should":false,"search":"disk space","switch":true,"actions":[{"name":"click","capture":["Filesystem             Size  Used Avail Use% Mounted on"]},{"name":"mouseover","capture":["Filesystem             Size  Used Avail Use% Mounted on"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false,"metrics":[]},"gridShow":"true","dragRes":"true","grid":{"vert":"32","hor":"18"}}', '2020-08-13 14:48:19.691984+03' where
    NOT EXISTS (
        SELECT id FROM dash WHERE name='GlusterFS'
    ) returning id;
INSERT INTO dash (name, body, modified) select 'Nginx', '{"name":"Nginx","modified":1594107866,"elements":["single","table-2","table-3","multiLine","table","lineChart","lineChart-2","lineChart-3"],"searches":[{"sid":"all","original_otl":"otstats index=nginxlogs sourcetype=\"nginxlogs\" | stats count as \"Nginx total request\"","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"sec","original_otl":"otstats  index=nginxlogs sourcetype=\"nginxlogs\"  | stats count as requests by _time |  sort  _time","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"log","original_otl":"otstats index=nginxlogs  sourcetype=nginxlogs| eval time=strftime(_time,\"%Y-%m-%d %H:%M:%S\") as time| sort count=50 -time|table time,_raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"last","original_otl":"otstats index=nginxlogs sourcetype=\"nginxlogs\"\n| top 10 http_referer | fields - 10","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"allH","original_otl":"otstats index=nginxlogs sourcetype=\"nginxlogs\" | eval status=tonumber(status)|sort status|stats count as requests by status\n","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"count","original_otl":"otstats index=nginxlogs sourcetype=\"nginxlogs\"\n| rex field=request \"(?<httpmethod>(GET|POST|PUT|DELETE))\"\n| table _time, httpmethod\n| timechart span=5m count by httpmethod\n| fields - 0","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"size","original_otl":"otstats index=nginxlogs sourcetype=\"nginxlogs\"\n| sort _time \n| eval body_response= tonumber(body_bytes) / 1000 \n|table _time,body_response","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"request_time","original_otl":"otstats index=nginxlogs\n| sort _time \n|table _time,request_time","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}}],"tockens":[],"modalDelete":{"active":false,"id":"","name":"","page":""},"modalSearch":{"elem":"lineChart-3","status":false},"modalSettings":{"status":false},"schedulers":{},"events":[],"single":{"name_elem":"Nginx total requests","width":8,"height":6,"top":0,"left":1,"should":false,"search":"all","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-2":{"name_elem":"HTTP 200","width":140,"height":49,"top":357,"left":54.5,"should":false,"search":"200","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-3":{"name_elem":"HTTP 400","width":345,"height":195,"top":211.5,"left":826,"should":false,"search":"400","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-4":{"name_elem":"HTTP 404","width":345,"height":195,"top":141.5,"left":1178,"should":false,"search":"404","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-5":{"name_elem":"HTTP 499","width":345,"height":195,"top":401.5,"left":1214,"should":false,"search":"499","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-6":{"name_elem":"HTTP 304","width":105,"height":59,"top":522.5,"left":817,"should":false,"search":"304","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-7":{"name_elem":"HTTP 401","width":345,"height":195,"top":558.5,"left":1008,"should":false,"search":"401","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-8":{"name_elem":"HTTP 500","width":98,"height":45,"top":319.5,"left":921,"should":false,"search":"500","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"single-9":{"name_elem":"HTTP 405","width":157,"height":55,"top":60.5,"left":617,"should":false,"search":"405","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-2":{"name_elem":"Http request status","width":8,"height":6,"top":0,"left":9,"should":false,"search":"allH","switch":true,"actions":[{"name":"click","capture":["status","requests"]},{"name":"mouseover","capture":["status","requests"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-3":{"name_elem":"Top 10 http requests ","width":16,"height":6,"top":6,"left":1,"should":false,"search":"last","switch":true,"actions":[{"name":"click","capture":["http_referer","count","percent"]},{"name":"mouseover","capture":["http_referer","count","percent"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"multiLine":{"name_elem":"Http method(count)","width":16,"height":6,"top":12,"left":1,"should":false,"search":"count","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false,"metrics":["GET","POST","PUT"]},"table":{"name_elem":"Last logs","width":1862,"height":315,"top":1123,"left":11,"should":false,"search":"log","switch":true,"actions":[{"name":"click","capture":["time","_raw"]},{"name":"mouseover","capture":["time","_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"lineChart":{"name_elem":"Http requests(per second)","width":15,"height":6,"top":0,"left":17,"should":false,"search":"sec","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"lineChart-2":{"name_elem":"Responze size in Kb","width":15,"height":6,"top":6,"left":17,"should":false,"search":"size","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"lineChart-3":{"name_elem":"Request time (ms)","width":15,"height":6,"top":12,"left":17,"should":false,"search":"request_time","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"grid":{"vert":"32","hor":"18"},"gridShow":"true","dragRes":"true"}', '2020-08-13 14:48:19.695032+03' where
    NOT EXISTS (
        SELECT id FROM dash WHERE name='Nginx'
    ) returning id;
INSERT INTO dash (name, body, modified) select 'Nifi', '{"name":"Nifi ","modified":1597084426,"elements":["multiLine","table","table-2","table-3","lineChart","lineChart-2","lineChart-3","lineChart-4"],"searches":[{"sid":"alert","original_otl":"otstats index=nifilogs sourcetype=nifi_applogs earliest=-1d| search level=WARN OR level=ERROR | table _time,level\n| timechart span=10m count by level\n| fields - 0","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"top","original_otl":"otstats index=nifilogs sourcetype=nifi_userlogs earliest=-24h |  rex field=_raw \"http://(?<request>.+) \\(\" | top request| fields - percent","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"nifi logs","original_otl":"otstats  index=nifilogs sourcetype=nifi_applogs earliest=-1h | table _raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"nifi user","original_otl":"otstats  index=nifilogs sourcetype=nifi_userlogs earliest=-1h | table _raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"flow_time","original_otl":"otstats index=nifilogs sourcetype=nifi_applogs earliest=-10m | rex field=_raw \"processing time:(?<ptime>\\d+)\"\n|eval \"processing time\"=tonumber(ptime)/pow(10,3)| search \"processing time\"=*|sort _time\n|table _time,\"processing time\"","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"count","original_otl":"otstats index=nifilogs sourcetype=nifi_applogs earliest=-10m | rex field=_raw \"processing time:(?<ptime>\\d+)\"\n|search ptime=*|stats count by _time|sort _time\n","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"size","original_otl":"otstats index=nifilogs sourcetype=nifi_applogs earliest=-10m |rex field=_raw \"size flowfile recieved:(?<size_file>\\d+)\"|search  size_file=*\n|  eval size=tonumber(size_file)/pow(2,11)| eval size=printf(\"%.2f\",size)| sort _time|table _time,size","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"size_w","original_otl":"otstats index=nifilogs sourcetype=nifi_applogs earliest=-10m |rex field=_raw \"file size to write:(?<size_file>\\d+)\"|search  size_file=*\n|  eval size=tonumber(size_file)/pow(2,11)| eval size=printf(\"%.2f\",size)| sort _time|table _time,size","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}}],"tockens":[],"modalDelete":{"active":false,"id":"","name":"","page":""},"modalSearch":{"elem":"lineChart-4","status":false},"modalSettings":{"status":false},"schedulers":{},"multiLine":{"name_elem":"Alert","width":13,"height":6,"top":9,"left":1,"should":false,"search":"alert","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false,"metrics":["ERROR","WARN"]},"events":[],"table":{"name_elem":"Top requests per day","width":13,"height":6,"top":2,"left":1,"should":false,"search":"top","switch":true,"actions":[{"name":"click","capture":["request","count"]},{"name":"mouseover","capture":["request","count"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-2":{"name_elem":"Last app logs","width":13,"height":9,"top":16,"left":1,"should":false,"search":"nifi logs","switch":true,"actions":[{"name":"click","capture":["_raw"]},{"name":"mouseover","capture":["_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-3":{"name_elem":"Last user logs","width":13,"height":11,"top":26,"left":1,"should":false,"search":"nifi user","switch":true,"actions":[{"name":"click","capture":["_raw"]},{"name":"mouseover","capture":["_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"lineChart":{"name_elem":"Processing time for each flowfile (ms) last 10 min","width":14,"height":6,"top":2,"left":15,"should":false,"search":"flow_time","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"lineChart-2":{"name_elem":"Flowfiles recieved last 10 min","width":14,"height":6,"top":8,"left":15,"should":false,"search":"count","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"lineChart-3":{"name_elem":"MBs recieved last 10 min","width":14,"height":6,"top":14,"left":15,"should":false,"search":"size","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"lineChart-4":{"name_elem":"MBs written to index last 10 min","width":14,"height":6,"top":20,"left":15,"should":false,"search":"size_w","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"grid":{"vert":"32","hor":"18"},"gridShow":"true","dragRes":"true"}', '2020-08-13 14:48:19.700232+03' where
    NOT EXISTS (
        SELECT id FROM dash WHERE name='Nifi'
    ) returning id;
INSERT INTO dash (name, body, modified) select 'Spark_driver', '{"name":"Spark_driver","modified":1597132336,"elements":["guntt","table","multiLine","single","table-2","table-3","table-4","table-5","lineChart","select","table-6","table-7"],"searches":[{"sid":"all","original_otl":"otstats index=driverlog earliest=-2h\n| search sourcetype=driverlog\n| rex field=_raw \"Job (?<id>\\d+) is running\" \n|  search id=*| rename _time as \"start_date\"\n| table id,start_date\n| join id [otstats index=driverlog | search sourcetype=driverlog| rex field=_raw \"(Job |Future failed: \\[SearchId:)(?<id>\\d+)( is finished|\\])\" | sort - _time | search id=*| rex field=_raw \"(?<status>(failed|finished|cancelled))\" | eval description=if(status==\"failed\" OR status==\"cancelled\",_raw,\"ok\")|rename _time as end_date |table end_date,id,status,description]\n| rename status as phase\n| search end_date=*\n| sort - id\n| fields - \"-\"\n| tail 9\n","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"Fail","original_otl":"otstats index=driverlog \n| search sourcetype=driverlog\n|rex field=_raw \"(OTLQuery\\(|Job |SearchID:|SearchId:)(?<id>\\d+)(,| is|\\])\"\n| eval id=floor(id)\n| search $tkn_search$\n| sort _time \n| rename id as search_id\n| table search_id,_raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"alert","original_otl":"otstats index=driverlog | search sourcetype=driverlog| rex field=_raw \"\\|(?<alert>(WARN|ERROR))\\|\" \n| search alert=*\n| table _time,alert\n| timechart span=30m count by alert\n| fields - 0\n\n","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"version","original_otl":"otstats index=sparkapplogs |search eventname=SparkListenerLogStart| rex  field=_raw \"\\\"Spark Version\\\":\\\"(?<spark_version>.+)\\\"\"| table spark_version","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"app_id","original_otl":"otstats index=sparkapplogs \n| search eventname=SparkListenerApplicationEnd OR eventname=SparkListenerApplicationStart\n| rex field=_raw \"\\\"Timestamp\\\":(?<start_time>\\d+),\" \n| rex field=_raw \"\\\"App ID\\\":\\\"(?<id>app.+)\\\",\" \n| rex field=_raw \"App Name\\\":\\\"(?<app_name>\\w.+)\\\",\\\"App\" \n| eval start_time=strftime(substr(start_time,0,10),\"%Y-%m-%d %H:%M:%S\")\n| eventstats values(eventname) as events by source\n| search id=*\n| table events,id,start_time,app_name\n| eval events=mvjoin(events, \",\")\n| eval temp=split(events,\",\") | eval start=mvindex(temp,0)| eval end=mvindex(temp,1)\n| eval status=if(isnull(start) OR isnull(end),\"active\",\"completed\")\n| table start_time,app_name,id,status\n","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"executors","original_otl":"otstats index=sparkapplogs sourcetype=sparkapplogs | search eventname=SparkListenerTaskEnd\n| rex field=_raw \"\\\"Executor ID\\\":\\\"(?<executor_id>\\d+)\\\"\"\n| rex field=_raw \"\\\"Local Bytes Read\\\":(?<shuffleReadByteLocal>\\d+)\"\n|rex field=_raw \"\\\"Remote Bytes Read\\\":(?<shuffleReadByteRemote>\\d+),\" \n| rex field=_raw \"|''Bytes Written\\\":(?<outputBytes>\\d+),\" \n| rex field=_raw \"\\\"Shuffle Bytes Written\\\":(?<shuffleWriteBytes>\\d+),\" \n| rex field=_raw \"\\\"Bytes Read\\\":(?<inputBytes>\\d+),\" \n| rex field=_raw \"\\\"Stage ID\\\":(?<stage_id>\\d+)\"\n| rex field=_raw \"\\''Executor Run Time\\\":(?<compl_time>\\d+)\"\n| eval stage_id=floor(stage_id)\n| sort stage_id\n| table stage_id,executor_id,shuffleReadByteLocal,shuffleReadByteRemote,shuffleWriteBytes,inputBytes,outputBytes,compl_time,source\n| stats sum(shuffleWriteBytes) as Total_shuffleWriteBytes sum(shuffleReadByteRemote) as Total_shuffleReadByteRemote sum(shuffleReadByteLocal) as Total_shuffleReadByteLocal  sum(inputBytes) as Total_inputBytes  by executor_id,source\n| eval Total_shuffleReadByte=Total_shuffleReadByteRemote+Total_shuffleReadByteLocal\n| eval Total_shuffleWriteMB=Total_shuffleWriteBytes/pow(10,6),Total_shuffleReadMB=Total_shuffleReadByte/pow(10,6),Total_inputBytesGB=Total_inputBytes/pow(10,9)\n| rex field=source \"/(?<app_id>app-\\d{14}-\\d{4})\"\n| table executor_id,app_id,Total_shuffleWriteMB,Total_shuffleReadMB,Total_inputBytesGB| search app_id=$tkn_app_id$","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"exec_logs","original_otl":"otstats index=executorslog earliest=-2m | rex field=source \"\\d/(?<executor_id>\\d+)/stderr\"\n| sort -_time | search executor_id=$tkn_exec_id$\n| table executor_id,_raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"spark_jobs","original_otl":"otstats index=sparkapplogs sourcetype=sparkapplogs earliest=-1h   | search eventname=SparkListenerStageCompleted\n| rex field=_raw \"input.bytesRead\\\",\\\"Value\\\":(?<inputBytes>\\d+),\" \n| rex field=_raw \"\\\"Stage ID\\\":(?<stage_id>\\d+)\"\n| rex field=_raw \"Completion Time\\\":(?<compl_time>)\"\n| table stage_id,inputBytes,_time\n| join stage_id [otstats index=sparkapplogs sourcetype=sparkapplogs earliest=-1h  | search eventname=SparkListenerStageSubmitted\n| rex field=_raw \"\\\"spark.jobGroup.id\\\":\\\"Search ID (?<search_id>\\d+)\\\"\" | rex field=_raw \"\\\"Stage ID\\\":(?<stage_id>\\d+)\"| table search_id,stage_id,_time\n]\n| eval search_id=floor(search_id)\n| stats sum(inputBytes) as input by search_id\n| eval input_MB=input/pow(10,6)\n|join search_id [otstats index=sparkapplogs sourcetype=sparkapplogs earliest=-1h   | search eventname=SparkListenerJobStart| rex field=_raw \"\\\"spark.jobGroup.id\\\":\\\"Search ID (?<search_id>\\d+)\\\"\" | rex field=_raw \"\\\"Job ID\\\":(?<job_id>\\d+)\"| rex field=_raw \"\\\"Stage IDs\\\":\\[(?<stage_id>.+)\\]\"| eval search_id=floor(search_id)|search job_id=*|table search_id, job_id,_time|mvcombine job_id]\n| search search_id=*\n| sort -search_id\n| table search_id,input_MB,job_id,_time","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"cpu_time","original_otl":"otstats index=sparkapplogs sourcetype=sparkapplogs earliest=-3d| search eventname=SparkListenerStageCompleted\n| rex field=_raw \"\\\"Stage ID\\\":(?<stage_id>\\d+)\"\n| rex field=_raw \"\\\"internal.metrics.executorCpuTime\\\",\\\"Value\\\":(?<cpu_time>\\d+)\"\n| rex field=_raw \"\\\"Completion Time\\\":(?<end_time>\\d+)\"\n| eval cpu_time=cpu_time/pow(10,9)\n| eval end_time=floor(substring(end_time,0,10))\n| sort end_time\n| table end_time,cpu_time","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"search_id","original_otl":"otstats index=driverlog |rex field=_raw \"(OTLQuery\\(|Job |SearchID:|SearchId:)(?<id>\\d+)(,| is|\\])\"\n| eval id=floor(id) |dedup id\n| sort id\n|table id \n| rename id as \"search id\"\n| tail 100","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"active_app","original_otl":"search index=sparkenvlog \n| rex field=_raw \"Launching (driver|executor) (?<name>\\S+) \"\n| rex field=_raw \"on worker (?<worker_id>\\S+)\"\n| eval tmp=split(name,\"/\")\n| eval executor_id=mvjoin(mvindex(tmp,1),\"\")\n| eval name=mvindex(tmp,0)\n| eval name=mvjoin(name,\"\")\n| search  name=*  OR worker_name=*\n| table worker_id,executor_id,name\n| join name [|otstats index=sparkenvlog | rex field=_raw \"Removing app (?<app_killed>\\S+)\"| rex field=_raw \"Kill request for (?<driver_killed>\\S+) \" | search driver_killed=* or app_killed=*| eval status=\"completed\"| eval name=if(isnotnull(driver_killed) AND isnull(app_killed),driver_killed,app_killed)| table name,status]\n| eval status=if(isnull(status),\"active\",status)\n| eval executor_id=if(isnull(executor_id),name,executor_id)\n| sort status\n| fields worker_id,executor_id,status","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}},{"sid":"driver log","original_otl":"otstats index=driverlog earliest=-1h | search source=*$tkn_driver$* | sort -_time | table _raw","parametrs":{"tws":0,"twf":0,"username":"admin","timeout":60,"preview":false,"field_extraction":false,"cache_ttl":60}}],"tockens":[{"name":"tkn_job","elem":"guntt","action":"click","capture":"id","prefix":"","sufix":"","delimetr":"","value":"1870"},{"name":"tkn_exec_id","elem":"table-3","action":"click","capture":"executor_id","prefix":"","sufix":"","delimetr":"","value":"1"},{"name":"tkn_app_id","elem":"table-2","action":"click","capture":"id","prefix":"","sufix":"","delimetr":"","value":"app-20200624122241-0001"},{"name":"tkn_search","elem":"select","action":"change","capture":"","prefix":"id=","sufix":"","delimetr":" OR ","value":""},{"name":"tkn_driver","elem":"table-6","action":"click","capture":"executor_id","prefix":"","sufix":"","delimetr":"","value":"0"}],"modalDelete":{"active":false,"id":"","name":"","page":""},"modalSearch":{"elem":"table-7","status":false},"modalSettings":{"status":false},"schedulers":{},"guntt":{"name_elem":"Search''s status","width":11,"height":7,"top":8,"left":21,"should":false,"search":"all","switch":true,"actions":[{"name":"click","capture":["id","start_date","end_date","phase","description"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"events":[],"table":{"name_elem":"Search logs","width":12,"height":9,"top":19,"left":9,"should":false,"search":"Fail","switch":true,"actions":[{"name":"click","capture":["search_id","_raw"]},{"name":"mouseover","capture":["search_id","_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"multiLine":{"name_elem":"Alerting(per 30m)","width":11,"height":7,"top":1,"left":21,"should":false,"search":"alert","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false,"metrics":["ERROR","WARN"]},"single":{"name_elem":"Spark version","width":9,"height":3,"top":1,"left":0,"should":false,"search":"version","switch":true,"actions":[{"name":"click","capture":[]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-2":{"name_elem":"Active app","width":12,"height":7,"top":1,"left":9,"should":false,"search":"app_id","switch":true,"actions":[{"name":"click","capture":["start_time","app_name","id","status"]},{"name":"mouseover","capture":["start_time","app_name","id","status"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-3":{"name_elem":"Executors","width":9,"height":7,"top":4,"left":0,"should":false,"search":"executors","switch":true,"actions":[{"name":"click","capture":["executor_id","app_id","Total_shuffleWriteMB","Total_shuffleReadMB","Total_inputBytesGB"]},{"name":"mouseover","capture":["executor_id","app_id","Total_shuffleWriteMB","Total_shuffleReadMB","Total_inputBytesGB"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":true},"table-4":{"name_elem":"Executor logs","width":9,"height":11,"top":11,"left":0,"should":false,"search":"exec_logs","switch":true,"actions":[{"name":"click","capture":["executor_id","_raw"]},{"name":"mouseover","capture":["executor_id","_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-5":{"name_elem":"Volume of input data per search","width":11,"height":13,"top":15,"left":21,"should":false,"search":"spark_jobs","switch":true,"actions":[{"name":"click","capture":["search_id","input_MB","job_id","_time"]},{"name":"mouseover","capture":["search_id","input_MB","job_id","_time"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":true},"lineChart":{"name_elem":"CPU utilization(s)","width":9,"height":9,"top":22,"left":0,"should":false,"search":"cpu_time","switch":true,"actions":[{"name":"click","capture":["pointX","pointY"]},{"name":"select","capture":["start","end"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"select":{"name_elem":"Select search id to see logs","width":12,"height":4,"top":15,"left":9,"should":false,"search":"search_id","switch":true,"actions":[{"name":"click","capture":[]},{"name":"change","capture":[]},{"name":"mouseover","capture":[]}],"options":{"change":true,"visible":true,"level":1,"boxShadow":false,"multiple":true},"loading":false,"selected":{"elem":"search id","elemlink":"search id","elemDeep":[]}},"table-6":{"name_elem":"Active workers","width":12,"height":7,"top":8,"left":9,"should":false,"search":"active_app","switch":true,"actions":[{"name":"click","capture":["worker_id","executor_id","status"]},{"name":"mouseover","capture":["worker_id","executor_id","status"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"table-7":{"name_elem":"Last driver logs","width":23,"height":9,"top":28,"left":9,"should":false,"search":"driver log","switch":true,"actions":[{"name":"click","capture":["_raw"]},{"name":"mouseover","capture":["_raw"]}],"options":{"change":false,"visible":true,"level":1,"boxShadow":false},"loading":false},"gridShow":"true","dragRes":"true","grid":{"vert":"32","hor":"18"}}', '2020-08-18 13:47:25.812586+03' where
    NOT EXISTS (
        SELECT id FROM dash WHERE name='Spark_driver'
    ) returning id;


--
-- Data for Name: dash_group; Type: TABLE DATA; Schema: public; Owner: dispatcher
--
INSERT INTO "group" (name, color) 
    SELECT 'Logs', '#2E0DA4FF'
    WHERE NOT EXISTS (
        SELECT 1 FROM "group" WHERE name='Logs'
    );

INSERT INTO dash_group (dash_id, group_id)

    select dash.id as dash_id,"group".id as group_id from dash,"group"  
    WHERE dash.name in ('GlusterFS','Nginx','Nifi','OT.REST','Spark_driver') and "group".name='Logs' and 
    NOT EXISTS (
        SELECT * FROM dash_group WHERE dash_id in (select id from dash where name in ('GlusterFS','Nginx','Nifi','OT.REST','Spark_driver'))
    ) returning dash_id;
--
--



--
-- PostgreSQL database dump complete
--

